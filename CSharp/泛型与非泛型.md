# 泛型集合与非泛型集合对比（C# / .NET）

在 .NET（尤其是 C#）中，**泛型集合**与**非泛型集合**是两种用于存储和操作一组对象的数据结构，它们在**类型安全、性能、代码可读性**等方面有显著区别。

---

## 一、基本概念

### 1. 非泛型集合（Non-Generic Collections）
- 定义在 `System.Collections` 命名空间中。
- 存储的数据类型为 **`object`**（即可以存任何类型）。
- 常见类型：
  - `ArrayList`
  - `Hashtable`
  - `Queue`
  - `Stack`
  - `SortedList`

### 2. 泛型集合（Generic Collections）
- 定义在 `System.Collections.Generic` 命名空间中。
- 在定义时**指定元素的具体类型**，如 `List<int>`、`Dictionary<string, Person>`。
- 常见类型：
  - `List<T>`
  - `Dictionary<TKey, TValue>`
  - `Queue<T>`
  - `Stack<T>`
  - `HashSet<T>`

---

## 二、核心区别对比

| 特性 | 非泛型集合 | 泛型集合 |
|------|-----------|---------|
| **类型安全** | ❌ 不安全（运行时才报错） | ✅ 编译时检查，类型安全 |
| **装箱/拆箱** | ✅ 值类型需装箱（性能损耗） | ❌ 无装箱/拆箱（值类型直接存储） |
| **性能** | 较低（尤其处理值类型时） | 更高 |
| **代码可读性** | 差（需强制转换） | 好（类型明确） |
| **适用场景** | 早期 .NET 1.0，或需混合类型（极少见） | 现代 C# 开发的标准选择 |

---

## 三、代码示例对比

### ❌ 非泛型集合（`ArrayList`）
```csharp
using System;
using System.Collections;

ArrayList list = new ArrayList();
list.Add(10);          // int 被装箱为 object
list.Add("hello");     // 允许混入 string！

// 取出时需强制转换
int num = (int)list[0]; // 若实际是 string，运行时抛 InvalidCastException```

using System;
using System.Collections.Generic;

List<int> list = new List<int>();
list.Add(10);           // 直接存储 int，无装箱
// list.Add("hello");   // 编译错误！类型不匹配

int num = list[0];      // 无需转换，类型安全
